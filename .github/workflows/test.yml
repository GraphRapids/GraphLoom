name: Tests

on:
  push:
    branches:
      - main
  pull_request:
  workflow_dispatch:

permissions:
  contents: read

concurrency:
  group: test-${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  pytest:
    uses: Faerkeren/python-workflow-standards/.github/workflows/python-tests.yml@main
    with:
      python-versions: '["3.10","3.11","3.12","3.13"]'
      install-spec: ".[dev]"
      coverage-target: "src/graphloom"
      coverage-threshold: 85
      install-node: true
      node-version: "20"
      pytest-args: "-q"
    secrets: inherit
